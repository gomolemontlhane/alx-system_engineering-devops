#!/usr/bin/env bash
set -e

# Install Nginx if not already installed
if ! command -v nginx &> /dev/null; then
    echo "Nginx is not installed. Installing..."
    sudo apt update
    sudo apt install nginx -y
fi

# Remove default Nginx site configuration
default_config="/etc/nginx/sites-enabled/default"
if [ -f "$default_config" ]; then
    sudo rm "$default_config"
fi

# Symlink the default configuration to sites-enabled
sudo ln -sf /etc/nginx/sites-available/default "$default_config"

# Restart Nginx to apply changes
sudo systemctl restart nginx
echo "Nginx configuration updated and service restarted."
