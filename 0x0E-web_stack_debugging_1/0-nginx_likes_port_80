#!/usr/bin/env bash
# This script checks if Nginx is installed and configures it to use the default site configuration

set -euo pipefail

# Check if Nginx is installed
if ! command -v nginx &> /dev/null; then
    echo "Nginx is not installed. Installing..."
    sudo apt update
    sudo apt install nginx -y
fi

# Remove default Nginx site configuration if exists
default_config="/etc/nginx/sites-enabled/default"
if [ -f "$default_config" ]; then
    sudo rm "$default_config"
fi

# Create symbolic link to default configuration
sudo ln -sf /etc/nginx/sites-available/default "$default_config"

# Restart Nginx to apply changes
sudo systemctl restart nginx
echo "Nginx configuration updated and service restarted."
